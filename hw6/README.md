# ДЗ №6 ОС
Исполнитель: Миронов Павел Андреевич. Группа: БПИ-212

## Условие

Разработать программы клиента и сервера, взаимодействующих через разделяемую память с использованием функций UNIX SYSTEM V. Клиент генерирует случайные числа в том же диапазоне, что и ранее рассмотренный на семинаре пример. Сервер осуществляет их вывод.

Необходимо обеспечить корректное завершение работы для одного клиента и сервера, при котором удаляется сегмент разделяемой памяти и завершается работа обеих программ независимо от того, какая из них инициировала завершение.

Предложить и реализовать свой вариант корректного завершения. Описать этот вариант в отчете.

## Решение

Программа состоит из трёх частей:

1. `shared_memory.c` и `shared_memory.h`: Модуль разделяемой памяти, отвечающий за создание и подключение к разделяемой памяти, а также управление её удалением. В нём также есть функция для генерации случайных чисел.

2. `client.c`: Клиент, который генерирует случайные числа и записывает их в разделяемую память.

3. `server.c`: Модуль сервера, который получает числа из разделяемой памяти и выводит их на экран.

### Корректное завершение

В данной программе реализован свой вариант корректного завершения работы клиента и сервера, независимо от того, какая из них инициировала завершение.

При получении сигнала SIGINT (Ctrl+C) клиент и сервер вызывают один и тот же обработчик сигнала `signal_handler`, который выполняет следующие действия:

- Отсоединение от разделяемой памяти с помощью функции `detach_shared_memory()`.
- Удаление сегмента разделяемой памяти с помощью функции `remove_shared_memory()`.
- Завершение работы программы с помощью `exit(0)`.

Такой подход гарантирует корректное освобождение ресурсов и завершение работы как клиента, так и сервера при получении сигнала SIGINT, независимо от инициатора завершения.


Были использованы UNIX System V.

## Примеры работы

### Клиент

```
$ make
$ ./client.o
```

### Сервер

```
$ make
$ ./server.o
Получено число: 1458334298
Получено число: 1255873197
Получено число: 1328662933
Получено число: 2052113159
Получено число: 276365299
Получено число: 1974521113
Получено число: 564904809
Получено число: 2001343961
Получено число: 1011621941
Получено число: 904974670
Получено число: 1542321757
Получено число: 691653492
Получено число: 1288873699
Получено число: 1974928100
Получено число: 1218553797
Получено число: 1827549830
Получено число: 1480050342
```
